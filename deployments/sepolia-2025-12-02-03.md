# ECS V2 Sepolia Deployment - 2025-12-02-03

**Date:** December 2, 2025  
**Network:** Sepolia Testnet (Chain ID: 11155111)  
**Deployment Number:** 03 (Clean deployment with correct owner setup)

## Changes from Deployment 02

Fixed the `CredentialResolver` owner issue:
- Updated script to explicitly compute deployer address from private key using `vm.addr()`
- Pass explicit `deployerAddress` to `CredentialResolver` constructor instead of relying on `msg.sender`
- Verified owner matches deployer: `0xF8e03bd4436371E0e2F7C02E529b2172fe72b4EF`

## Deployed Contracts

| Contract | Address |
|----------|---------|
| ECS Registry | `0x016BfbF42131004401ABdfe208F17A1620faB742` |
| ECS Registrar | `0x7aDf2626E846aC3a36ac72f25B8329C893b45e12` |
| Credential Resolver | `0x03eb9Bf23c828E3891A8fE3cB484A7ca769B985e` |

## Configuration

- **Root Name:** `ecs.eth`
- **Root Node:** `0xe436ba58406c69a63a9611a11eb52314c5c17ba9eaaa7dab8506fe8849517286`
- **Deployer Address:** `0xF8e03bd4436371E0e2F7C02E529b2172fe72b4EF` ✅
- **CredentialResolver Owner:** `0xF8e03bd4436371E0e2F7C02E529b2172fe72b4EF` ✅ (matches!)
- **Registrar Pricing:** ~0.001 ETH/year (32000 wei/second)
- **Min Commitment Age:** 60 seconds
- **Min Duration:** 60 seconds
- **Max Duration:** `type(uint64).max`
- **Min Label Length:** 3
- **Max Label Length:** 64

## Registration Commitments

### name-stars

- **Label:** `name-stars`
- **Duration:** 365 days
- **Commitment Hash:** `0xabfe8d6be7052d65504d94cd16858998f0172b96b18423dc438aca63ed8830b6`
- **Secret:** `0x5338c9729ec2472c0eb5dad4ae22a62b88dc3e8fa31238b87017567874257891`
- **Status:** Committed (pending registration)

## Environment Variables

Add these to your `.env` file for use with `RegisterAndSetup.s.sol`:

```bash
ECS_REGISTRY_ADDRESS=0x016BfbF42131004401ABdfe208F17A1620faB742
ECS_REGISTRAR_ADDRESS=0x7aDf2626E846aC3a36ac72f25B8329C893b45e12
CREDENTIAL_RESOLVER_ADDRESS=0x03eb9Bf23c828E3891A8fE3cB484A7ca769B985e
ROOT_NODE=0xe436ba58406c69a63a9611a11eb52314c5c17ba9eaaa7dab8506fe8849517286
REGISTRATION_SECRET=0x5338c9729ec2472c0eb5dad4ae22a62b88dc3e8fa31238b87017567874257891
```

## Next Steps

1. Wait at least 60 seconds after deployment
2. **Update `ecs.eth` manager** to the new ECS Registry address: `0x016BfbF42131004401ABdfe208F17A1620faB742`
3. Copy the environment variables above to your `.env` file
4. Run `RegisterAndSetup.s.sol` to complete the registration and set credential records

## Verification

- **Explorer:** [Sepolia Etherscan](https://sepolia.etherscan.io/)
- **Registry:** [0x016BfbF42131004401ABdfe208F17A1620faB742](https://sepolia.etherscan.io/address/0x016BfbF42131004401ABdfe208F17A1620faB742)
- **Registrar:** [0x7aDf2626E846aC3a36ac72f25B8329C893b45e12](https://sepolia.etherscan.io/address/0x7aDf2626E846aC3a36ac72f25B8329C893b45e12)
- **Resolver:** [0x03eb9Bf23c828E3891A8fE3cB484A7ca769B985e](https://sepolia.etherscan.io/address/0x03eb9Bf23c828E3891A8fE3cB484A7ca769B985e)

## Architecture Notes

- **Single-label CredentialResolver**: One resolver per label (e.g., `name-stars.ecs.eth`)
- **Owner-only access**: Only the deployer can set records on the `CredentialResolver`
- **Simplified storage**: No labelhash parameters needed
- **Fixed owner mismatch**: Explicitly passes deployer address to constructor

